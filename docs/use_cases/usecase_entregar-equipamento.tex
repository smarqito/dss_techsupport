\documentclass[../relatorio.tex]{subfiles}
\begin{document}
Representa o ato de entregar equipamento ao cliente.
Compreende a mudança de estado do equipamento para entregue
e, se aplicável, o registo do pagamento do equipamento.
\begin{itemize}
    \item[Use Case] {\underline{Entregar equipamento}}
    \item[Cenários] {1, 2 e 4}
    \item[Pré-condição] {Funcionário autenticado e equipamento disponível para entrega}
    \item[Pós-condição] {Equipamento entregue e pago}
          \begin{flushleft}
              \textbf{Fluxo Normal}
          \end{flushleft}
          \begin{enumerate}
              \item Funcionário insere identificador do equipamento
              \item Sistema devolve preço da reparação do equipamento
              \item Funcionário regista a reparação como paga
              \item Sistema regista a reparação como paga
              \item Funcionário define equipamento como entregue
              \item Sistema altera estado do equipamento para entregue
          \end{enumerate}
          \begin{flushleft}
              \textbf{Fluxo de Exceção 1 (passo 2) [cliente recusou orçamento]}
          \end{flushleft}
          \begin{itemize}
              \item[2.1] Funcionário define equipamento como entregue
              \item[2.2] Sistema altera estado do equipamento para entregue
          \end{itemize}
             \begin{flushleft}
                 \textbf{Fluxo de Exceção 2 (passo 3) [cliente não paga]}
             \end{flushleft}
             \begin{itemize}
                 \item[3.1]{Funcionário regista comentário que cliente não pagou}
                 \item[3.2]{Sistema regista comentário}
                 \item[3.3]{Sistema regista data e hora}  
             \end{itemize}
\end{itemize}
\begin{landscape}
    \begin{table}[!h]
        \centering
        \begin{tabular}{|p{5cm}|p{1cm}|p{4cm}|p{6cm}|p{3cm}|}
            \hline
            \rowcolor{gray!20!white}
            Use Case & Fluxo & Responsabilidade & API & Subsistema \\
            \hline
            \rowcolor{yellow}
            Funcionário insere identificador do equipamento
                     & UI
                     &
                     &
                     &
            \\
            \hline
            Sistema devolve preço da reparação do equipamento
                     &
                     & Sistema calcula o preço da reparação do equipamento
                     & calcularPrecoRep(repID:String): Double
                     & SubReparacoes
            \\
            \hline
            \rowcolor{yellow}
            Funcionário regista reparação como pago
                     & UI
                     &
                     &
                     &
            \\
            \hline
            Sistema regista a reparação como paga
                     & 
                     & Sistema altera o estado da reparação para paga 
                     & alterarEstadoRep(repID: String, estado: EstadoReparacao)
                     & SubReparacoes
            \\
            \hline
            \rowcolor{yellow}
            Funcionário define equipamento como entregue
                     & UI
                     &
                     &
                     &
            \\
            \hline
            Sistema altera estado do equipamento para entregue
                     &
                     & Sistema altera o estado do equipamento para entregue
                     & alteraEstadoEq(equipID: String, state: EstadoEquipamento)
                     & SubReparacoes
            \\
            \hline
            \rowcolor{red!30}
            Exceção  
                    &
            1           
                    &
            \multicolumn{3}{c}{cliente recusou orçamento}
            \\
            \hline
            \rowcolor{yellow}
            Funcionário define equipamento como entregue
                    & UI
                    &
                    &
                    &
            \\
            \hline
            Sistema altera estado do equipamento para entregue
                    & 
                    & Sistema altera estado do equipamento para entregue
                    & alteraEstadoEq(equipID: String, state: EstadoEquipamento)
                    & SubReparacoes
            \\
            \hline
            \rowcolor{red!30}
            Exceção
                     & 
            2 
                     & 
            \multicolumn{3}{c}{cliente não paga}
            \\
            \hline
            \rowcolor{yellow}
            Funcionário regista comentário que cliente não pagou
                    & UI
                    &
                    &
                    &
            \\
            \hline
            Sistema regista comentário
            Sistema regista data e hora
                    & 
                    & Sistema regista um comentário na reparação e a data/hora que foi feito
                    & alterarEstadoRep(repID: String, estado: EstadoReparacao, comentario: String)
                    & SubReparacoes
            \\
            \hline
        \end{tabular}
        \caption{Análise Use Case - Entregar equipamento (Ver \ref{entregar_equipamento})}
    \end{table}
\end{landscape}

\end{document}